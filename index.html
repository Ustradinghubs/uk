
<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Trading Investment Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c0a26, #1a1a2e, #0c0a26);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .trading-header {
            background: linear-gradient(90deg, #0066cc, #004499, #0066cc);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 25px rgba(0,0,0,0.6);
            position: relative;
            z-index: 100;
            border-bottom: 2px solid #00ff88;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            font-size: 2rem;
            color: #00ff88;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.7);
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(to right, #00ff88, #00cc66, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.4);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-name {
            background: rgba(0,0,0,0.3);
            padding: 6px 12px;
            border-radius: 15px;
            border: 2px solid #00ff88;
            font-size: 0.9rem;
            color: #00ff88;
            font-weight: bold;
        }

        .balance {
            background: rgba(0,0,0,0.3);
            padding: 6px 12px;
            border-radius: 15px;
            border: 2px solid #00ff88;
            font-size: 0.9rem;
        }

        .balance span {
            color: #00ff88;
            font-weight: bold;
        }

        .action-btns {
            display: flex;
            gap: 8px;
        }

        .deposit-btn, .withdraw-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 0.85rem;
        }

        .deposit-btn {
            background: linear-gradient(45deg, #00cc66, #00ff88);
            color: #001a33;
            box-shadow: 0 0 12px rgba(0, 255, 136, 0.4);
        }

        .withdraw-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: #330000;
            box-shadow: 0 0 12px rgba(255, 107, 107, 0.4);
        }

        .deposit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.7);
        }

        .withdraw-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.4);
        }

        .main-content {
            padding: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            margin-bottom: 2.5rem;
            font-size: 2.2rem;
            background: linear-gradient(to right, #00ff88, #00cc66, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 12px rgba(0, 255, 136, 0.3);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(to right, #00ff88, #00cc66, #00ff88);
            border-radius: 2px;
        }

        .account-panel {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(0, 255, 136, 0.2);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
        }

        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(0, 255, 136, 0.2);
        }

        .account-title {
            font-size: 1.8rem;
            color: #00ff88;
            font-weight: bold;
        }

        .account-actions {
            display: flex;
            gap: 10px;
        }

        .account-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 0.9rem;
        }

        .account-deposit-btn {
            background: linear-gradient(45deg, #00cc66, #00ff88);
            color: #001a33;
        }

        .account-withdraw-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: #330000;
        }

        .account-btn:hover {
            transform: scale(1.05);
        }

        .wallet-container {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .wallet-card {
            background: linear-gradient(135deg, #0a0a1a, #0d0d22);
            border-radius: 20px;
            padding: 1.5rem;
            flex: 1;
            border: 2px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .wallet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .wallet-icon {
            font-size: 1.5rem;
            color: #00ff88;
        }

        .wallet-name {
            font-size: 1.1rem;
            color: #00ff88;
            font-weight: bold;
        }

        .wallet-balance {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff88;
            margin: 1rem 0;
        }

        .wallet-actions {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }

        .wallet-action-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 0.9rem;
            flex: 1;
            text-align: center;
        }

        .wallet-deposit-btn {
            background: linear-gradient(45deg, #00cc66, #00ff88);
            color: #001a33;
        }

        .wallet-invest-btn {
            background: linear-gradient(45deg, #0066cc, #004499);
            color: white;
        }

        .wallet-action-btn:hover {
            transform: scale(1.03);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            border: 2px solid rgba(0, 255, 136, 0.2);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            border-color: #00ff88;
        }

        .stat-icon {
            font-size: 1.8rem;
            color: #00ff88;
            margin-bottom: 1rem;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00ff88;
            margin: 0.5rem 0;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #ccc;
        }

        .investment-section {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 2.5rem 1.5rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(0, 255, 136, 0.2);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
        }

        .investment-plans {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .plan-card {
            background: linear-gradient(145deg, #0a0a1a, #0d0d22);
            border-radius: 20px;
            padding: 2rem 1.5rem;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .plan-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            border-color: #00ff88;
        }

        .plan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, #00ff88, #00cc66, #00ff88, transparent);
            transform: scaleX(0);
            transition: transform 0.5s ease;
        }

        .plan-card:hover::before {
            transform: scaleX(1);
        }

        .plan-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #00cc66, #00ff88);
            color: #001a33;
            padding: 4px 12px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.8rem;
            box-shadow: 0 3px 12px rgba(0, 255, 136, 0.4);
        }
        
        .plan-badge.gift {
            background: linear-gradient(45deg, #ffc107, #ff9800);
        }

        .plan-icon {
            font-size: 2.5rem;
            margin-bottom: 1.2rem;
            background: linear-gradient(45deg, #00ff88, #00cc66);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .plan-name {
            font-size: 1.5rem;
            color: #00ff88;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .plan-range {
            background: rgba(0, 255, 136, 0.1);
            padding: 6px 12px;
            border-radius: 15px;
            margin: 0.8rem 0;
            font-weight: bold;
            color: #00cc66;
            font-size: 0.95rem;
        }

        .plan-return {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff88;
            margin: 1.2rem 0;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }

        .plan-features {
            list-style: none;
            margin: 1.2rem 0;
            text-align: left;
            padding: 0;
        }

        .plan-features li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
            color: #aaa;
            font-size: 0.9rem;
            line-height: 1.3;
        }

        .plan-features li::before {
            content: "✓";
            color: #00ff88;
            font-weight: bold;
            position: absolute;
            left: 0;
            top: 0;
        }

        .invest-btn {
            background: linear-gradient(45deg, #00cc66, #00ff88);
            color: #001a33;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1.2rem;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
            width: 100%;
        }

        .invest-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 20px rgba(0, 255, 136, 0.6);
        }

        .modal {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: rgba(0,0,0,0.85);
            z-index: 1000; justify-content: center; align-items: center; padding: 1rem;
        }

        .modal-content {
            background: linear-gradient(135deg, #0c0a26, #1a1a2e);
            border-radius: 20px; padding: 2rem; width: 100%; max-width: 600px;
            border: 2px solid #00ff88; position: relative;
            animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 15px 45px rgba(0,0,0,0.6);
            max-height: 90vh; overflow-y: auto;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-40px) scale(0.95); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }

        .close-btn {
            position: absolute; top: 15px; right: 15px; background: none; border: none;
            color: #00ff88; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease;
        }
        .close-btn:hover { color: #00cc66; transform: rotate(90deg); }

        .crypto-options {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem; margin-top: 1.2rem;
        }

        .crypto-option {
            background: rgba(255,255,255,0.08); padding: 15px 10px; border-radius: 12px;
            text-align: center; cursor: pointer; transition: all 0.3s ease;
            border: 2px solid transparent; backdrop-filter: blur(5px);
        }
        .crypto-option:hover, .crypto-option.active {
            background: rgba(0, 255, 136, 0.15); border-color: #00ff88; transform: translateY(-3px);
        }
        .crypto-option i { font-size: 1.8rem; color: #00ff88; margin-bottom: 8px; display: block; }
        .crypto-option span { display: block; font-weight: bold; font-size: 0.9rem; }

        .deposit-instructions, .withdraw-instructions {
            background: rgba(0,0,0,0.25); border-radius: 15px; padding: 25px; margin-top: 20px;
            border-left: 4px solid #00ff88; backdrop-filter: blur(8px);
        }
        .instructions-header { text-align: center; margin-bottom: 20px; color: #00ff88; font-size: 1.3rem; font-weight: bold; text-shadow: 0 0 8px rgba(0, 255, 136, 0.3); }

        .wallet-address-container {
            background: rgba(0,0,0,0.4); padding: 20px; border-radius: 12px; margin: 20px 0;
            text-align: center; border: 2px solid #00ff88; backdrop-filter: blur(5px);
        }
        .wallet-label { color: #00ff88; margin-bottom: 12px; font-weight: bold; font-size: 1.1rem; }
        .wallet-address {
            font-family: 'Courier New', monospace; font-size: 1.1rem; word-break: break-all;
            background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin: 12px 0;
            cursor: pointer; transition: all 0.3s ease; line-height: 1.3;
        }
        .wallet-address:hover { background: rgba(0, 255, 136, 0.2); transform: scale(1.02); }

        .copy-btn {
            background: linear-gradient(45deg, #00cc66, #00ff88); color: #001a33; border: none;
            padding: 10px 20px; border-radius: 20px; cursor: pointer; margin-top: 12px;
            transition: all 0.3s ease; font-weight: bold; font-size: 1rem;
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
        }
        .copy-btn:hover { transform: scale(1.03); box-shadow: 0 6px 16px rgba(0, 255, 136, 0.5); }

        .important-instructions { margin-top: 25px; }
        .important-title { color: #00cc66; margin-bottom: 15px; font-size: 1.1rem; font-weight: bold; display: flex; align-items: center; gap: 10px; justify-content: center; }
        .instructions-list { list-style: none; padding: 0; }
        .instructions-list li { margin-bottom: 12px; padding-left: 25px; position: relative; line-height: 1.4; font-size: 0.95rem; }
        .instructions-list li:before { content: "•"; color: #00ff88; font-size: 1.5rem; position: absolute; left: 0; top: -3px; }

        .upload-section { margin-top: 25px; text-align: center; }
        .input-group { margin: 15px 0; }
        .input-group label { display: block; margin-bottom: 8px; color: #00ff88; font-weight: bold; font-size: 0.95rem; }
        .input-group input { width: 100%; padding: 12px; border-radius: 10px; border: 2px solid #00ff88; background: rgba(0,0,0,0.3); color: white; font-size: 1rem; }
        .upload-btn {
            background: linear-gradient(45deg, #2196F3, #1976D2); color: white; border: none;
            padding: 12px 25px; border-radius: 20px; cursor: pointer; margin-top: 15px;
            transition: all 0.3s ease; font-weight: bold; font-size: 1rem;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }
        .upload-btn:hover { transform: scale(1.03); box-shadow: 0 6px 16px rgba(33, 150, 243, 0.5); }
        .support-info { margin-top: 20px; text-align: center; color: #ccc; font-size: 0.9rem; line-height: 1.5; }
        .support-info a { color: #00ff88; text-decoration: none; font-weight: bold; }
        .support-info a:hover { text-decoration: underline; }

        .login-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center;
            align-items: center; padding: 1rem;
        }
        .login-content {
            background: linear-gradient(135deg, #0c0a26, #1a1a2e); border-radius: 20px;
            padding: 2.5rem; width: 100%; max-width: 450px; border: 2px solid #00ff88;
            position: relative; animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 15px 45px rgba(0,0,0,0.6);
        }
        .login-header { text-align: center; margin-bottom: 25px; color: #00ff88; font-size: 1.8rem; }
        .login-form .input-group { margin-bottom: 20px; }
        .login-btn {
            background: linear-gradient(45deg, #00cc66, #00ff88); color: #001a33; border: none;
            padding: 14px; border-radius: 25px; font-weight: bold; font-size: 1.1rem;
            cursor: pointer; width: 100%; margin-top: 10px;
        }
        .login-btn:hover { transform: scale(1.03); box-shadow: 0 6px 16px rgba(0, 255, 136, 0.5); }
        .signup-link { text-align: center; margin-top: 15px; color: #ccc; }
        .signup-link a { color: #00ff88; text-decoration: none; font-weight: bold; }
        .signup-link a:hover { text-decoration: underline; }

        .trading-popup {
            position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, #0066cc, #004499);
            color: white; padding: 15px 20px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 999; border-left: 4px solid #00ff88; transform: translateX(110%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            max-width: 350px; display: block;
        }
        .trading-popup.show { transform: translateX(0); }
        .trading-popup i { color: #00ff88; margin-right: 10px; }
        .trading-popup-content { font-size: 0.95rem; line-height: 1.4; }

        .success-popup {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, #00cc66, #00ff88); color: #001a33; padding: 25px;
            border-radius: 20px; box-shadow: 0 15px 50px rgba(0,255,136,0.5); z-index: 1500;
            text-align: center; display: none; animation: popupScale 0.3s ease forwards;
        }
        @keyframes popupScale { to { transform: translate(-50%, -50%) scale(1); } }
        .success-popup i { font-size: 2.5rem; margin-bottom: 15px; display: block; }
        .success-popup-content { font-size: 1.2rem; font-weight: bold; margin-bottom: 15px; }
        .success-popup-text { margin-bottom: 20px; }
        .success-popup-btn {
            background: #001a33; color: white; border: none; padding: 10px 25px;
            border-radius: 20px; cursor: pointer; font-weight: bold;
        }

        .transactions-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .transactions-table th, .transactions-table td { padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .transactions-table th { color: #00ff88; font-weight: bold; background: rgba(0, 255, 136, 0.1); }
        .transactions-table tr:hover { background: rgba(255,255,255,0.05); }

        .status-pending { color: #f39c12; font-weight: bold; }
        .status-completed, .status-active { color: #2ecc71; font-weight: bold; }
        .status-failed { color: #e74c3c; font-weight: bold; }
        .status-processing { color: #3498db; font-weight: bold; }
        .type-deposit { color: #4CAF50; }
        .type-withdrawal { color: #f44336; }
        .type-investment { color: #2196F3; }
        .type-bonus { color: #ffeb3b; }

        .referral-section { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 20px; margin-top: 20px; border: 2px solid rgba(0, 255, 136, 0.2); }
        .referral-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .referral-title { color: #00ff88; font-weight: bold; font-size: 1.2rem; }
        .referral-link-container { display: flex; align-items: center; background: rgba(0,0,0,0.3); border-radius: 8px; padding: 5px; border: 1px solid #00ff88; }
        .referral-link { font-family: 'Courier New', monospace; background: transparent; padding: 10px; border: none; color: white; flex-grow: 1; word-break: break-all; }
    </style>
</head>
<body>
    <header class="trading-header">
        <div class="logo"><i class="fas fa-chart-line"></i><h1>CRYPTO TRADING INVEST</h1></div>
        <div class="user-info">
            <div class="user-name" id="userNameDisplay">Guest</div>
            <div class="balance"><span id="userBalance">$0.00</span></div>
            <div class="action-btns">
                <button class="deposit-btn" onclick="openDepositModal()"><i class="fas fa-arrow-down"></i> DEPOSIT</button>
                <button class="withdraw-btn" onclick="openWithdrawModal()"><i class="fas fa-arrow-up"></i> WITHDRAW</button>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="account-panel">
            <div class="account-header">
                <h3 class="account-title">ACCOUNT BALANCE</h3>
                <div class="account-actions">
                    <button class="account-btn account-deposit-btn" onclick="openDepositModal()"><i class="fas fa-wallet"></i> Deposit</button>
                    <button class="account-btn account-withdraw-btn" onclick="openWithdrawModal()"><i class="fas fa-hand-holding-usd"></i> Withdraw</button>
                </div>
            </div>
            <div class="wallet-container">
                <div class="wallet-card">
                    <div class="wallet-header"><div class="wallet-icon"><i class="fas fa-folder"></i></div><div class="wallet-name">Main Wallet</div></div>
                    <div class="wallet-balance" id="mainWalletBalance">$0.00</div>
                    <div class="wallet-actions">
                        <button class="wallet-action-btn wallet-deposit-btn" onclick="openDepositModal()"><i class="fas fa-arrow-down"></i> Deposit</button>
                        <button class="wallet-action-btn wallet-invest-btn" onclick="openInvestNowModal()"><i class="fas fa-chart-line"></i> Invest Now</button>
                    </div>
                </div>
                <div class="wallet-card">
                    <div class="wallet-header"><div class="wallet-icon"><i class="fas fa-money-bill-wave"></i></div><div class="wallet-name">Profit Wallet</div></div>
                    <div class="wallet-balance" id="profitWalletBalance">$0.00</div>
                    <div class="wallet-actions">
                        <button class="wallet-action-btn wallet-deposit-btn" onclick="openDepositModal()"><i class="fas fa-arrow-down"></i> Deposit</button>
                        <button class="wallet-action-btn wallet-invest-btn" onclick="openInvestNowModal()"><i class="fas fa-chart-line"></i> Invest Now</button>
                    </div>
                </div>
            </div>
            <div class="stats-grid">
                <div class="stat-card" onclick="openTransactionsModal()"><div class="stat-icon"><i class="fas fa-exchange-alt"></i></div><div class="stat-value" id="totalTransactions">0</div><div class="stat-label">All Transactions</div></div>
                <div class="stat-card" onclick="openDepositDetailsModal()"><div class="stat-icon"><i class="fas fa-wallet"></i></div><div class="stat-value" id="totalDeposit">$0</div><div class="stat-label">Total Deposit</div></div>
                <div class="stat-card" onclick="openInvestmentDetailsModal()"><div class="stat-icon"><i class="fas fa-chart-line"></i></div><div class="stat-value" id="totalInvestment">$0</div><div class="stat-label">Total Investment</div></div>
                <div class="stat-card" onclick="openProfitDetailsModal()"><div class="stat-icon"><i class="fas fa-coins"></i></div><div class="stat-value" id="totalProfit">$0</div><div class="stat-label">Total Profit</div></div>
                <div class="stat-card" onclick="openTransferDetailsModal()"><div class="stat-icon"><i class="fas fa-arrow-up"></i></div><div class="stat-value" id="totalTransfer">$0</div><div class="stat-label">Total Transfer</div></div>
                <div class="stat-card" onclick="openWithdrawDetailsModal()"><div class="stat-icon"><i class="fas fa-arrow-down"></i></div><div class="stat-value" id="totalWithdraw">$0</div><div class="stat-label">Total Withdraw</div></div>
                <div class="stat-card" onclick="openReferralBonusModal()"><div class="stat-icon"><i class="fas fa-tag"></i></div><div class="stat-value" id="referralBonus">$0</div><div class="stat-label">Referral Bonus</div></div>
                <div class="stat-card" onclick="openDepositBonusModal()"><div class="stat-icon"><i class="fas fa-gift"></i></div><div class="stat-value" id="depositBonus">$0</div><div class="stat-label">Deposit Bonus</div></div>
                <div class="stat-card" onclick="openInvestmentBonusModal()"><div class="stat-icon"><i class="fas fa-medal"></i></div><div class="stat-value" id="investmentBonus">$0</div><div class="stat-label">Investment Bonus</div></div>
                <div class="stat-card" onclick="openReferralDetailsModal()"><div class="stat-icon"><i class="fas fa-users"></i></div><div class="stat-value" id="totalReferral">0</div><div class="stat-label">Total Referral</div></div>
                <div class="stat-card" onclick="openRankDetailsModal()"><div class="stat-icon"><i class="fas fa-trophy"></i></div><div class="stat-value" id="rankAchieved">0</div><div class="stat-label">Rank Achieved</div></div>
                <div class="stat-card" onclick="openTicketDetailsModal()"><div class="stat-icon"><i class="fas fa-ticket-alt"></i></div><div class="stat-value" id="totalTicket">0</div><div class="stat-label">Total Ticket</div></div>
            </div>
            <div class="referral-section">
                <div class="referral-header"><div class="referral-title">Your Referral Link</div></div>
                <div class="referral-link-container">
                    <input type="text" class="referral-link" id="referralLink" value="Loading..." readonly>
                    <button class="copy-btn" onclick="copyReferralLink()" style="padding: 10px 15px; font-size: 0.8rem; margin: 0; border-radius: 0 8px 8px 0;"><i class="fas fa-copy"></i> COPY</button>
                </div>
                <p style="color: #ccc; font-size: 0.9rem; margin-top: 10px;">Share this unique link with friends to earn referral bonuses!</p>
            </div>
        </div>

        <h2 class="section-title">TRADING INVESTMENT PLANS</h2>
        <div class="investment-section">
            <div class="investment-plans">
                <div class="plan-card pulse">
                    <div class="plan-badge gift">GIFT PLAN</div>
                    <div class="plan-icon"><i class="fas fa-gift"></i></div>
                    <div class="plan-name">WELCOME BONUS</div>
                    <div class="plan-range">$5 (Bonus Only)</div>
                    <div class="plan-return">+250%</div>
                    <ul class="plan-features"><li>Total Return: $12.50</li><li>Duration: 3 Days</li><li>Required: $5 Bonus</li><li>Instant Activation</li></ul>
                    <button class="invest-btn" onclick="openInvestModal('WELCOME BONUS', '$5', '+250%')"><i class="fas fa-hand-holding-usd"></i> ACTIVATE BONUS</button>
                </div>
                <div class="plan-card pulse">
                    <div class="plan-badge">BEST FOR BEGINNERS</div>
                    <div class="plan-icon"><i class="fas fa-seedling"></i></div>
                    <div class="plan-name">STARTER PLAN</div>
                    <div class="plan-range">$10 - $100</div>
                    <div class="plan-return">+150%</div>
                    <ul class="plan-features"><li>Daily Return: 21.4%</li><li>Duration: 7 Days</li><li>Minimum: $10</li><li>Maximum: $100</li></ul>
                    <button class="invest-btn" onclick="openInvestModal('STARTER PLAN', '$10 - $100', '+150%')"><i class="fas fa-hand-holding-usd"></i> INVEST NOW</button>
                </div>
                <div class="plan-card pulse">
                    <div class="plan-badge">MOST POPULAR</div>
                    <div class="plan-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="plan-name">PRO PLAN</div>
                    <div class="plan-range">$101 - $500</div>
                    <div class="plan-return">+200%</div>
                    <ul class="plan-features"><li>Daily Return: 28.5%</li><li>Duration: 7 Days</li><li>Minimum: $101</li><li>Maximum: $500</li></ul>
                    <button class="invest-btn" onclick="openInvestModal('PRO PLAN', '$101 - $500', '+200%')"><i class="fas fa-hand-holding-usd"></i> INVEST NOW</button>
                </div>
                <div class="plan-card pulse">
                    <div class="plan-icon"><i class="fas fa-medal"></i></div>
                    <div class="plan-name">MASTER PLAN</div>
                    <div class="plan-range">$501 - $2500</div>
                    <div class="plan-return">+300%</div>
                    <ul class="plan-features"><li>Daily Return: 42.8%</li><li>Duration: 7 Days</li><li>Minimum: $501</li><li>Maximum: $2500</li></ul>
                    <button class="invest-btn" onclick="openInvestModal('MASTER PLAN', '$501 - $2500', '+300%')"><i class="fas fa-hand-holding-usd"></i> INVEST NOW</button>
                </div>
            </div>
        </div>
    </main>

    <!-- All Modals -->
    <div id="loginModal" class="login-modal">
        <div class="login-content">
            <h3 class="login-header"><i class="fas fa-user"></i> USER LOGIN / SIGN UP</h3>
            <div class="login-form">
                <div class="input-group"><label for="userName">Full Name</label><input type="text" id="userName" placeholder="Enter your full name" required></div>
                <div class="input-group"><label for="userEmail">Email Address</label><input type="email" id="userEmail" placeholder="Enter your email address" required></div>
                <div class="input-group"><label for="userPassword">Password</label><input type="password" id="userPassword" placeholder="Enter your password" required></div>
                <button class="login-btn" onclick="handleLogin()"><i class="fas fa-sign-in-alt"></i> LOGIN & START TRADING</button>
                <div class="signup-link">By logging in, you agree to our <a href="#">Terms of Service</a>.</div>
            </div>
        </div>
    </div>

    <div id="depositModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('depositModal')">&times;</button>
            <h3 style="text-align: center; color: #00ff88; margin-bottom: 20px; font-size: 1.5rem;"><i class="fas fa-coins"></i> SELECT DEPOSIT METHOD</h3>
            <div class="crypto-options">
                <div class="crypto-option" onclick="selectCrypto(this, 'BTC', 'deposit')"><i class="fab fa-bitcoin"></i><span>Bitcoin (BTC)</span></div>
                <div class="crypto-option" onclick="selectCrypto(this, 'LTC', 'deposit')"><i class="fas fa-coins"></i><span>Litecoin (LTC)</span></div>
                <div class="crypto-option" onclick="selectCrypto(this, 'ETH', 'deposit')"><i class="fab fa-ethereum"></i><span>Ethereum (ETH)</span></div>
                <div class="crypto-option" onclick="selectCrypto(this, 'USDT', 'deposit')"><i class="fas fa-dollar-sign"></i><span>USDT (ERC20)</span></div>
            </div>
            <div id="depositDetails" style="margin-top: 20px; display: none;">
                <div class="deposit-instructions">
                    <div class="instructions-header"><i class="fas fa-exclamation-triangle"></i> DEPOSIT INSTRUCTIONS</div>
                    <p style="text-align: center; margin-bottom: 20px;">Please send funds to the address below.</p>
                    <div class="wallet-address-container">
                        <div class="wallet-label" id="depositWalletLabel">Wallet Address:</div>
                        <div class="wallet-address" id="depositWalletAddress"></div>
                        <button class="copy-btn" onclick="copyAddress('depositWalletAddress')"><i class="fas fa-copy"></i> COPY ADDRESS</button>
                    </div>
                    <div class="input-group"><label for="depositAmount">Amount ($)</label><input type="number" id="depositAmount" placeholder="Enter deposit amount in USD" min="10"></div>
                    <div class="input-group"><label for="depositTxId">Transaction ID (TXID)</label><input type="text" id="depositTxId" placeholder="Enter your transaction ID"></div>
                    <button class="copy-btn" style="margin-top: 20px; width: 100%;" onclick="submitDeposit()"><i class="fas fa-check"></i> SUBMIT DEPOSIT</button>
                </div>
            </div>
        </div>
    </div>

    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('withdrawModal')">&times;</button>
            <h3 style="text-align: center; color: #ff6b6b; margin-bottom: 20px; font-size: 1.5rem;"><i class="fas fa-wallet"></i> WITHDRAW FUNDS</h3>
            <div class="crypto-options">
                <div class="crypto-option" onclick="selectCrypto(this, 'BTC', 'withdraw')"><i class="fab fa-bitcoin"></i><span>Bitcoin (BTC)</span></div>
                <div class="crypto-option" onclick="selectCrypto(this, 'LTC', 'withdraw')"><i class="fas fa-coins"></i><span>Litecoin (LTC)</span></div>
                <div class="crypto-option" onclick="selectCrypto(this, 'ETH', 'withdraw')"><i class="fab fa-ethereum"></i><span>Ethereum (ETH)</span></div>
                <div class="crypto-option" onclick="selectCrypto(this, 'USDT', 'withdraw')"><i class="fas fa-dollar-sign"></i><span>USDT (ERC20)</span></div>
            </div>
            <div id="withdrawDetails" style="margin-top: 20px; display: none;">
                <div class="withdraw-instructions">
                    <div class="instructions-header"><i class="fas fa-exclamation-triangle"></i> WITHDRAWAL INSTRUCTIONS</div>
                    <div class="input-group"><label for="withdrawAddress">Your Wallet Address:</label><input type="text" id="withdrawAddress" placeholder="Enter your wallet address"></div>
                    <div class="input-group"><label for="withdrawAmount">Withdrawal Amount ($):</label><input type="number" id="withdrawAmount" placeholder="Enter amount" min="10"></div>
                    <button class="copy-btn" style="background: linear-gradient(45deg, #ff6b6b, #ff8e8e); color: #330000; margin-top: 20px; width: 100%;" onclick="confirmWithdrawal()"><i class="fas fa-check"></i> CONFIRM WITHDRAWAL</button>
                </div>
            </div>
        </div>
    </div>

    <div id="investModal" class="modal"><div class="modal-content"><button class="close-btn" onclick="closeModal('investModal')">&times;</button><h3 id="investPlanTitle" style="text-align: center; color: #00ff88; margin-bottom: 20px; font-size: 1.5rem;"></h3><div style="text-align: center; margin-bottom: 15px; color: #00cc66; font-size: 1.1rem;"><span id="investPlanRange"></span> | <span id="investPlanReturn"></span></div><div class="input-group"><label for="investAmount">Investment Amount ($)</label><input type="number" id="investAmount" placeholder="Enter amount"></div><button class="copy-btn" style="margin-top: 15px; width: 100%;" onclick="confirmInvestment()"><i class="fas fa-check"></i> CONFIRM INVESTMENT</button></div></div>
    <div id="investNowModal" class="modal"><div class="modal-content"><button class="close-btn" onclick="closeModal('investNowModal')">&times;</button><h3 style="text-align: center; color: #00ff88; margin-bottom: 20px; font-size: 1.5rem;"><i class="fas fa-chart-line"></i> INVEST NOW</h3><div class="investment-plans" style="gap: 1rem;"><div class="plan-card" style="padding: 1.5rem;"><div class="plan-badge gift">GIFT PLAN</div><div class="plan-icon"><i class="fas fa-gift"></i></div><div class="plan-name">WELCOME BONUS</div><div class="plan-range">$5</div><button class="invest-btn" style="padding: 10px 20px; font-size: 0.9rem;" onclick="openInvestModal('WELCOME BONUS', '$5', '+250%')">ACTIVATE</button></div><div class="plan-card" style="padding: 1.5rem;"><div class="plan-badge">BEST FOR BEGINNERS</div><div class="plan-icon"><i class="fas fa-seedling"></i></div><div class="plan-name">STARTER PLAN</div><div class="plan-range">$10 - $100</div><button class="invest-btn" style="padding: 10px 20px; font-size: 0.9rem;" onclick="openInvestModal('STARTER PLAN', '$10 - $100', '+150%')">INVEST</button></div></div></div></div>
    <div id="transactionsModal" class="modal"><div class="modal-content"><button class="close-btn" onclick="closeModal('transactionsModal')">&times;</button><h3 style="text-align: center; color: #00ff88; margin-bottom: 20px;"><i class="fas fa-exchange-alt"></i> ALL TRANSACTIONS</h3><div style="overflow-x: auto;"><table class="transactions-table"><thead><tr><th>Date & Time</th><th>Type</th><th>Amount</th><th>Status</th></tr></thead><tbody id="transactionsTableBody"></tbody></table></div></div></div>
    <div id="tradingPopup" class="trading-popup"><i class="fas fa-chart-line"></i><div class="trading-popup-content" id="popupContent">Welcome!</div></div>
    <div id="successPopup" class="success-popup"><i id="successIcon" class="fas fa-check-circle"></i><div id="successContent" class="success-popup-content"></div><div id="successText" class="success-popup-text"></div><button class="success-popup-btn" onclick="closeSuccessPopup()">OK</button></div>

    <script>
        'use strict';
        let currentUser = null;
        
        document.addEventListener('DOMContentLoaded', function() {
            const savedUser = localStorage.getItem('cryptoUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUI();
                startTransactionStatusChecker();
            } else {
                document.getElementById('loginModal').style.display = 'flex';
            }
            startTradingPopupRotation();
        });
        
        function handleLogin() {
            const name = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const password = document.getElementById('userPassword').value;
            
            if (!name || !email || !password) {
                alert('Please enter all fields');
                return;
            }
            
            // New user object with $5 bonus and hasDeposited flag
            currentUser = { 
                name, email, password,
                balance: 5.00, mainWallet: 5.00, profitWallet: 0.00,
                totalDeposit: 0.00, totalInvestment: 0.00, totalProfit: 0.00,
                totalTransfer: 0.00, totalWithdraw: 0.00, referralBonus: 0.00,
                depositBonus: 5.00, investmentBonus: 0.00, totalReferral: 0,
                rankAchieved: 0, totalTicket: 0, 
                transactions: [
                    { id: Date.now(), type: 'bonus', amount: 5.00, status: 'Completed' }
                ],
                hasDeposited: false // CRITICAL: Flag for withdrawal check
            };
            
            localStorage.setItem('cryptoUser', JSON.stringify(currentUser));
            updateUI();
            document.getElementById('loginModal').style.display = 'none';
            showPopup('success', 'Welcome!', `You have received a $5.00 welcome bonus!`);
        }
        
        function updateUI() {
            if (!currentUser) return;
            document.getElementById('userNameDisplay').textContent = currentUser.name;
            const fields = {
                userBalance: currentUser.balance, mainWalletBalance: currentUser.mainWallet,
                profitWalletBalance: currentUser.profitWallet, totalDeposit: currentUser.totalDeposit,
                totalInvestment: currentUser.totalInvestment, totalProfit: currentUser.totalProfit,
                totalTransfer: currentUser.totalTransfer, totalWithdraw: currentUser.totalWithdraw,
                referralBonus: currentUser.referralBonus, depositBonus: currentUser.depositBonus,
                investmentBonus: currentUser.investmentBonus
            };
            for (const id in fields) {
                if(document.getElementById(id)) document.getElementById(id).textContent = `$${fields[id].toFixed(2)}`;
            }
            const countFields = {
                totalTransactions: currentUser.transactions.length, totalReferral: currentUser.totalReferral,
                rankAchieved: currentUser.rankAchieved, totalTicket: currentUser.totalTicket
            };
            for (const id in countFields) {
                if(document.getElementById(id)) document.getElementById(id).textContent = countFields[id];
            }
            generateReferralLink();
        }
        
        function generateReferralLink() {
            if (currentUser) {
                const baseURL = window.location.origin;
                const referralCode = btoa(currentUser.email).replace(/=/g, '').slice(0, 10);
                document.getElementById('referralLink').value = `${baseURL}/?ref=${referralCode}`;
            }
        }

        function copyReferralLink() {
            const linkInput = document.getElementById('referralLink');
            linkInput.select();
            navigator.clipboard.writeText(linkInput.value).then(() => {
                const copyBtn = document.querySelector('.referral-section .copy-btn');
                const originalHTML = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i> COPIED!';
                setTimeout(() => { copyBtn.innerHTML = originalHTML; }, 2000);
            }).catch(() => alert('Failed to copy.'));
        }

        function openModal(modalId) {
             if (!currentUser) {
                document.getElementById('loginModal').style.display = 'flex';
                return;
            }
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function openDepositModal() { openModal('depositModal'); }
        function openWithdrawModal() { openModal('withdrawModal'); }
        function openInvestNowModal() { openModal('investNowModal'); }

        function openInvestModal(plan, range, returns) {
            document.getElementById('investPlanTitle').textContent = `INVEST IN ${plan}`;
            document.getElementById('investPlanRange').textContent = range;
            document.getElementById('investPlanReturn').textContent = returns;
            openModal('investModal');
        }

        // Detailed Modals
        function openTransactionsModal() { if (currentUser) { updateTransactionsTable(); openModal('transactionsModal'); } }
        function openDepositDetailsModal() { showInfoModal('Total Deposit', `Your total deposit: $${currentUser.totalDeposit.toFixed(2)}`, 'fas fa-wallet'); }
        function openInvestmentDetailsModal() { showInfoModal('Total Investment', `Your total investment: $${currentUser.totalInvestment.toFixed(2)}`, 'fas fa-chart-line'); }
        function openProfitDetailsModal() { showInfoModal('Total Profit', `Your total profit: $${currentUser.totalProfit.toFixed(2)}`, 'fas fa-coins'); }
        function openTransferDetailsModal() { showInfoModal('Total Transfer', `Your total transfer: $${currentUser.totalTransfer.toFixed(2)}`, 'fas fa-arrow-up'); }
        function openWithdrawDetailsModal() { showInfoModal('Total Withdraw', `Your total withdrawal: $${currentUser.totalWithdraw.toFixed(2)}`, 'fas fa-arrow-down'); }
        function openReferralBonusModal() { showInfoModal('Referral Bonus', `Your referral bonus: $${currentUser.referralBonus.toFixed(2)}`, 'fas fa-tag'); }
        function openDepositBonusModal() { showInfoModal('Deposit Bonus', `Your deposit bonus: $${currentUser.depositBonus.toFixed(2)}`, 'fas fa-gift'); }
        function openInvestmentBonusModal() { showInfoModal('Investment Bonus', `Your investment bonus: $${currentUser.investmentBonus.toFixed(2)}`, 'fas fa-medal'); }
        function openReferralDetailsModal() { showInfoModal('Total Referral', `You have referred ${currentUser.totalReferral} users`, 'fas fa-users'); }
        function openRankDetailsModal() { showInfoModal('Rank Achieved', `Your current rank is ${currentUser.rankAchieved}`, 'fas fa-trophy'); }
        function openTicketDetailsModal() { showInfoModal('Total Ticket', `You have ${currentUser.totalTicket} support tickets`, 'fas fa-ticket-alt'); }
        
        function showInfoModal(title, content, iconClass) {
            const popup = document.getElementById('successPopup');
            popup.innerHTML = `<i class="${iconClass}" style="color: #001a33;"></i><div class="success-popup-content">${title}</div><div>${content}</div><button class="success-popup-btn" onclick="closeSuccessPopup()">CLOSE</button>`;
            popup.style.display = 'block';
        }

        function showPopup(type, title, text, buttonText = 'OK', buttonAction = null) {
            const popup = document.getElementById('successPopup');
            const icon = document.getElementById('successIcon');
            document.getElementById('successContent').textContent = title;
            document.getElementById('successText').textContent = text;
            const btn = popup.querySelector('.success-popup-btn');
            btn.textContent = buttonText;
            
            if (type === 'error') {
                icon.className = 'fas fa-exclamation-triangle';
                popup.style.background = 'linear-gradient(135deg, #ff8e8e, #ff6b6b)';
            } else {
                icon.className = 'fas fa-check-circle';
                popup.style.background = 'linear-gradient(135deg, #00ff88, #00cc66)';
            }
            
            btn.onclick = () => { closeSuccessPopup(); if (buttonAction) buttonAction(); };
            popup.style.display = 'block';
        }
        
        function updateTransactionsTable() {
            const tbody = document.getElementById('transactionsTableBody');
            tbody.innerHTML = '';
            if (currentUser && currentUser.transactions.length > 0) {
                currentUser.transactions.slice().reverse().forEach(tx => {
                    const row = document.createElement('tr');
                    const statusClass = `status-${tx.status.toLowerCase()}`;
                    const typeClass = `type-${tx.type}`;
                    row.innerHTML = `<td>${new Date(tx.id).toLocaleString()}</td><td class="${typeClass}">${tx.type.charAt(0).toUpperCase() + tx.type.slice(1)}</td><td>$${tx.amount.toFixed(2)}</td><td class="${statusClass}">${tx.status}</td>`;
                    tbody.appendChild(row);
                });
            } else {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center;">No transactions found.</td></tr>';
            }
        }
        
        function closeModal(modalId) { document.getElementById(modalId).style.display = 'none'; }
        function closeSuccessPopup() {
            const popup = document.getElementById('successPopup');
            popup.style.display = 'none';
            popup.innerHTML = `<i id="successIcon" class="fas fa-check-circle"></i><div id="successContent" class="success-popup-content"></div><div id="successText" class="success-popup-text"></div><button class="success-popup-btn" onclick="closeSuccessPopup()">OK</button>`;
        }
        
        function selectCrypto(element, crypto, type) {
            const container = type === 'deposit' ? '#depositModal' : '#withdrawModal';
            document.querySelectorAll(`${container} .crypto-option`).forEach(opt => opt.classList.remove('active'));
            element.classList.add('active');
            
            if (type === 'deposit') {
                const details = {
                    'BTC': { address: 'bc1q...' }, 'LTC': { address: 'ltc1q...' },
                    'ETH': { address: '0x...' }, 'USDT': { address: '0x...' }
                };
                document.getElementById('depositWalletAddress').textContent = details[crypto].address;
                document.getElementById('depositWalletLabel').textContent = `${crypto} Address:`;
            }
            document.getElementById(type === 'deposit' ? 'depositDetails' : 'withdrawDetails').style.display = 'block';
        }

        function copyAddress(elementId) {
            navigator.clipboard.writeText(document.getElementById(elementId).textContent);
        }
        
        function submitDeposit() {
            const txId = document.getElementById('depositTxId').value.trim();
            const amount = parseFloat(document.getElementById('depositAmount').value);
            if (!txId || isNaN(amount) || amount < 10) { alert('Please provide a valid amount (min $10) and transaction ID.'); return; }
            
            const newTransaction = { id: Date.now(), type: 'deposit', amount, txId, status: 'Pending' };
            currentUser.transactions.push(newTransaction);
            currentUser.hasDeposited = true; // Set flag to true on first deposit
            localStorage.setItem('cryptoUser', JSON.stringify(currentUser));
            updateUI();
            scheduleTransactionFailure(newTransaction.id);
            showPopup('success', 'Deposit Submitted', `Your deposit of $${amount.toFixed(2)} is pending verification.`);
            closeModal('depositModal');
            document.getElementById('depositTxId').value = '';
            document.getElementById('depositAmount').value = '';
        }

        function scheduleTransactionFailure(transactionId) {
            const randomDelay = Math.random() * (1800000 - 900000) + 900000;
            setTimeout(() => {
                let user = JSON.parse(localStorage.getItem('cryptoUser'));
                if (user) {
                    let tx = user.transactions.find(t => t.id === transactionId);
                    if (tx && tx.status === 'Pending') {
                        tx.status = 'Failed';
                        localStorage.setItem('cryptoUser', JSON.stringify(user));
                    }
                }
            }, randomDelay);
        }

        function startTransactionStatusChecker() {
            if (!currentUser || !currentUser.transactions) return;
            currentUser.transactions.forEach(tx => {
                if (tx.status === 'Pending' && (Date.now() - tx.id) < 1800000) {
                    scheduleTransactionFailure(tx.id);
                }
            });
        }
        
        function confirmInvestment() {
            const amount = parseFloat(document.getElementById('investAmount').value);
            if (isNaN(amount) || amount <= 0) { alert('Please enter a valid amount'); return; }
            if (currentUser.balance < amount) { showPopup('error', 'Insufficient Balance', 'Not enough funds.', 'DEPOSIT', openDepositModal); return; }
            
            currentUser.balance -= amount;
            currentUser.mainWallet -= amount;
            currentUser.totalInvestment += amount;
            currentUser.transactions.push({ id: Date.now(), type: 'investment', amount, plan: document.getElementById('investPlanTitle').textContent, status: 'Active' });
            localStorage.setItem('cryptoUser', JSON.stringify(currentUser));
            updateUI();
            showPopup('success', 'Investment Active!', `Your $${amount.toFixed(2)} investment is successful.`);
            closeModal('investModal');
        }
        
        function confirmWithdrawal() {
            // CRITICAL CHECK: Block withdrawal if user has not deposited
            if (currentUser.hasDeposited === false) {
                showPopup(
                    'error', 
                    'Deposit Required', 
                    'To activate withdrawals, you must first make a real deposit to your account.', 
                    'DEPOSIT NOW', 
                    openDepositModal
                );
                return; // Stop the function here
            }

            const address = document.getElementById('withdrawAddress').value.trim();
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            if (!address || isNaN(amount) || amount < 10) { alert('Enter a valid address and amount (min $10).'); return; }
            if (currentUser.balance < amount) { showPopup('error', 'Insufficient Balance', 'Not enough funds to withdraw.', 'DEPOSIT', openDepositModal); return; }
            
            currentUser.balance -= amount;
            currentUser.mainWallet -= amount;
            currentUser.totalWithdraw += amount;
            const txId = Date.now();
            currentUser.transactions.push({ id: txId, type: 'withdrawal', amount, address, status: 'Processing' });
            localStorage.setItem('cryptoUser', JSON.stringify(currentUser));
            updateUI();
            
            setTimeout(() => {
                let user = JSON.parse(localStorage.getItem('cryptoUser'));
                if (user) {
                    let tx = user.transactions.find(t => t.id === txId);
                    if (tx) {
                        tx.status = 'Completed';
                        localStorage.setItem('cryptoUser', JSON.stringify(user));
                        if(currentUser.email === user.email) currentUser = user;
                        updateUI();
                    }
                }
            }, Math.random() * 8000 + 3000);
            
            showPopup('success', 'Withdrawal Processing', `Your $${amount.toFixed(2)} withdrawal is being processed.`);
            closeModal('withdrawModal');
        }
        
        const tradingNotifications = ["User from Germany invested $5,000", "Withdrawal of $1,250 to a BTC wallet completed.", "New user from Japan just signed up!", "$10,000 invested in the ELITE PLAN.", "Welcome to our new trader from Australia!"];
        let notificationIndex = 0;
        function showTradingPopup() {
            const popup = document.getElementById('tradingPopup');
            popup.querySelector('.trading-popup-content').textContent = tradingNotifications[notificationIndex];
            popup.classList.add('show');
            setTimeout(() => {
                popup.classList.remove('show');
                notificationIndex = (notificationIndex + 1) % tradingNotifications.length;
            }, 5000);
        }
        function startTradingPopupRotation() { setInterval(showTradingPopup, 8000); }
        
        window.onclick = function(event) {
            if (event.target.classList.contains('modal') || event.target.classList.contains('login-modal')) {
                event.target.style.display = 'none';
            }
        };
    </script>
</body>
</html>
